===== ./add-language.sh =====
#!/bin/bash

# ğŸ“‚ Localise le fichier hugo.toml
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
CONFIG_FILE="$PROJECT_DIR/hugo.toml"

if [[ ! -f "$CONFIG_FILE" ]]; then
  echo "âŒ Fichier hugo.toml introuvable dans $PROJECT_DIR"
  exit 1
fi

# ğŸ”¤ Demande les langues avec nettoyage des inputs
read -p "Code langue principale (ex: fr) : " lang1
read -p "Nom affichÃ© (ex: FranÃ§ais) pour $lang1 : " name1
read -p "Poids (ordre d'affichage, ex: 1) pour $lang1 : " weight1
weight1=$(echo "$weight1" | tr -cd '[:digit:]')

read -p "Code langue secondaire (ex: en) : " lang2
read -p "Nom affichÃ© (ex: English) pour $lang2 : " name2
read -p "Poids (ordre d'affichage, ex: 2) pour $lang2 : " weight2
weight2=$(echo "$weight2" | tr -cd '[:digit:]')

if [[ -z "$weight1" || -z "$weight2" ]]; then
  echo "âŒ Les poids doivent Ãªtre des nombres entiers."
  exit 1
fi

# âœ… Fonction pour ajouter une langue si elle n'existe pas
add_lang_block() {
  local lang="$1"
  local name="$2"
  local weight="$3"

  if grep -q "^\[languages\.$lang\]" "$CONFIG_FILE"; then
    echo "âš ï¸ La langue '$lang' existe dÃ©jÃ , rien Ã  faire."
  else
    echo -e "\n[languages.$lang]" >> "$CONFIG_FILE"
    echo "languageName = \"$name\"" >> "$CONFIG_FILE"
    echo "contentDir = \"content/$lang\"" >> "$CONFIG_FILE"
    echo "weight = $weight" >> "$CONFIG_FILE"
    echo "[languages.$lang.params]" >> "$CONFIG_FILE"
    echo "  displayName = \"$name\"" >> "$CONFIG_FILE"
    echo "[languages.$lang.menus]" >> "$CONFIG_FILE"
    echo "  [[languages.$lang.menus.main]]" >> "$CONFIG_FILE"
    echo "    name = \"Home\"" >> "$CONFIG_FILE"
    echo "    pageRef = \"/\"" >> "$CONFIG_FILE"
    echo "    weight = 1" >> "$CONFIG_FILE"
    echo "  [[languages.$lang.menus.main]]" >> "$CONFIG_FILE"
    echo "    name = \"Posts\"" >> "$CONFIG_FILE"
    echo "    pageRef = \"/posts/\"" >> "$CONFIG_FILE"
    echo "    weight = 2" >> "$CONFIG_FILE"
    echo "âœ… Langue '$lang' ajoutÃ©e."
  fi
}

# ğŸ› ï¸ Ajoute defaultContentLanguage si absent
if ! grep -q "^defaultContentLanguage" "$CONFIG_FILE"; then
  echo -e "\ndefaultContentLanguage = \"$lang1\"" >> "$CONFIG_FILE"
  echo "âœ… defaultContentLanguage = \"$lang1\" ajoutÃ©."
fi

# ğŸ” Ajout des langues
add_lang_block "$lang1" "$name1" "$weight1"
add_lang_block "$lang2" "$name2" "$weight2"

echo -e "\nğŸ‰ TerminÃ©."


===== ./add-languages-multiple.sh =====
#!/bin/bash

# ğŸ“‚ Chemins
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
CONFIG_FILE="$PROJECT_DIR/hugo.toml"
CONTENT_DIR="$PROJECT_DIR/content"
TMP_FILE="$PROJECT_DIR/hugo_tmp.toml"

# ğŸ“œ Langues RTL connues
RTL_LANGS=("ar" "fa" "he" "ur" "ps" "syr" "dv")

# ğŸ§ª VÃ©rif
if [[ ! -f "$CONFIG_FILE" ]]; then
  echo "âŒ Fichier introuvable : $CONFIG_FILE"
  exit 1
fi

# ğŸŒ Langue par dÃ©faut
read -p "Langue par dÃ©faut (ex: fr) : " default_lang
# Supprime l'ancienne ligne si elle existe
grep -v '^defaultContentLanguage' "$CONFIG_FILE" > "$TMP_FILE"
echo "defaultContentLanguage = \"$default_lang\"" >> "$TMP_FILE"

# Nettoie tous les anciens blocs [languages.xx]
awk '
  BEGIN { skip=0 }
  /^\[languages\.[a-z]{2,3}\]/ { skip=1; next }
  /^\[languages\..*\]/ { skip=1; next }
  /^\[.*\]/ { skip=0 }
  skip==0 { print }
' "$TMP_FILE" > "$CONFIG_FILE"

echo "âœ… defaultContentLanguage = \"$default_lang\" dÃ©fini et anciens blocs nettoyÃ©s."

# ğŸ” Ajout de plusieurs langues
while true; do
  echo ""
  read -p "Code langue (ex: en), ENTER pour arrÃªter : " lang
  [[ -z "$lang" ]] && break

  read -p "Nom affichÃ© pour $lang : " name
  read -p "Poids (ordre dans menu) : " weight

  # RTL ?
  is_rtl=false
  for rtl_lang in "${RTL_LANGS[@]}"; do
    [[ "$lang" == "$rtl_lang" ]] && is_rtl=true && break
  done

  # Ajout du bloc dans hugo.toml
  {
    echo ""
    echo "[languages.$lang]"
    echo "languageName = \"$name\""
    echo "contentDir = \"content/$lang\""
    echo "weight = $weight"
    echo "[languages.$lang.params]"
    echo "  displayName = \"$name\""
    [[ "$is_rtl" == true ]] && echo "  rtl = true"
    echo "[languages.$lang.menus]"
    echo "  [[languages.$lang.menus.main]]"
    echo "    name = \"Home\""
    echo "    pageRef = \"/\""
    echo "    weight = 1"
    echo "  [[languages.$lang.menus.main]]"
    echo "    name = \"Posts\""
    echo "    pageRef = \"/posts/\""
    echo "    weight = 2"
  } >> "$CONFIG_FILE"

  echo "âœ… Langue '$lang' ajoutÃ©e avec${is_rtl:+ RTL}."

  # ğŸ“ CrÃ©ation du dossier content/lang + _index.md
  LANG_DIR="$CONTENT_DIR/$lang"
  INDEX_FILE="$LANG_DIR/_index.md"
  mkdir -p "$LANG_DIR"
  if [[ ! -f "$INDEX_FILE" ]]; then
    echo -e "---\ntitle: \"Accueil\"\n---\n\n{{< slogan >}}" > "$INDEX_FILE"
    echo "ğŸ“„ _index.md crÃ©Ã© dans $LANG_DIR"
  fi
done

echo ""
echo "ğŸ‰ Toutes les langues sont configurÃ©es dans hugo.toml et content/."


===== ./generate-lang-content.sh =====
#!/bin/bash

# ğŸ“ Chemins
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
cd "$PROJECT_DIR"

config_file="$PROJECT_DIR/hugo.toml"
article_name="bienvenue.md"

# ğŸŒ Traductions de "Bonjour Wil, tu as rÃ©ussi."
declare -A messages
messages[fr]="Bonjour Wil, tu as rÃ©ussi."
messages[en]="Hello Wil, you made it."
messages[es]="Hola Wil, lo lograste."
messages[de]="Hallo Wil, du hast es geschafft."
messages[it]="Ciao Wil, ce l'hai fatta."
messages[pt]="OlÃ¡ Wil, vocÃª conseguiu."
messages[ar]="Ù…Ø±Ø­Ø¨Ø§ ÙˆÙŠÙ„ØŒ Ù„Ù‚Ø¯ Ù†Ø¬Ø­Øª."
messages[fa]="Ø³Ù„Ø§Ù… ÙˆÛŒÙ„ØŒ Ù…ÙˆÙÙ‚ Ø´Ø¯ÛŒ."
messages[he]="×©×œ×•× ×•×™×œ, ×”×¦×œ×—×ª."
messages[ja]="ã“ã‚“ã«ã¡ã¯Wilã€æˆåŠŸã—ã¾ã—ãŸã€‚"
messages[zh]="ä½ å¥½Wilï¼Œä½ æˆåŠŸäº†ã€‚"
messages[ru]="ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ£Ğ¸Ğ», Ñ‚Ñ‹ ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑÑ."
messages[tr]="Merhaba Wil, baÅŸardÄ±n."
messages[nl]="Hallo Wil, je bent geslaagd."

# ğŸ” RÃ©cupÃ©ration des langues depuis hugo.toml
LANGS=$(grep -Po '^\s*\[languages\.\K[a-z]{2,3}(?=\])' "$config_file" | sort -u)

echo "ğŸŒ Langues dÃ©tectÃ©es dans hugo.toml : $LANGS"
echo

# ğŸ“ CrÃ©ation des fichiers
for lang in $LANGS; do
  filepath="content/$lang/$article_name"
  message="${messages[$lang]}"

  # Utilise l'anglais par dÃ©faut si la langue est absente
  if [ -z "$message" ]; then
    message="Hello Wil, you made it. ([$lang])"
  fi

  if [ ! -f "$filepath" ]; then
    mkdir -p "$(dirname "$filepath")"
    cat > "$filepath" <<EOF
---
title: "Bienvenue (${lang})"
date: $(date -Iseconds)
draft: false
---

$message
EOF
    echo "âœ… CrÃ©Ã© : $filepath"
  else
    echo "âš ï¸ Existe dÃ©jÃ  : $filepath"
  fi
done

echo
echo "ğŸ Tous les fichiers sont prÃªts ğŸ‰"


===== ./generate-test-articles.sh =====
#!/bin/bash

# ğŸ“ RÃ©pertoire du projet Hugo
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
cd "$PROJECT_DIR"

config_file="hugo.toml"
article_name="mon-test.md"

# ğŸŒ Traductions de base
declare -A messages
messages[fr]="Bonjour Wil, tu as rÃ©ussi."
messages[en]="Hello Wil, you made it."
messages[es]="Hola Wil, lo lograste."
messages[de]="Hallo Wil, du hast es geschafft."
messages[it]="Ciao Wil, ce l'hai fatta."
messages[pt]="OlÃ¡ Wil, vocÃª conseguiu."
messages[ar]="Ù…Ø±Ø­Ø¨Ø§ ÙˆÙŠÙ„ØŒ Ù„Ù‚Ø¯ Ù†Ø¬Ø­Øª."
messages[fa]="Ø³Ù„Ø§Ù… ÙˆÛŒÙ„ØŒ Ù…ÙˆÙÙ‚ Ø´Ø¯ÛŒ."
messages[he]="×©×œ×•× ×•×™×œ, ×”×¦×œ×—×ª."
messages[ja]="ã“ã‚“ã«ã¡ã¯Wilã€æˆåŠŸã—ã¾ã—ãŸã€‚"
messages[zh]="ä½ å¥½Wilï¼Œä½ æˆåŠŸäº†ã€‚"
messages[ru]="ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ£Ğ¸Ğ», Ñ‚Ñ‹ ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑÑ."
messages[tr]="Merhaba Wil, baÅŸardÄ±n."
messages[nl]="Hallo Wil, je bent geslaagd."

# ğŸ” Extraction des langues depuis hugo.toml
LANGS=$(grep -oP '\[languages\.\K[a-z]{2}(-[a-z]{2})?' "$config_file")

echo "ğŸŒ Langues dÃ©tectÃ©es dans hugo.toml : $LANGS"
echo

for lang in $LANGS; do
  folder="content/$lang/posts"
  filepath="$folder/$article_name"
  message="${messages[$lang]}"

  # Fallback si pas de traduction
  if [ -z "$message" ]; then
    message="Hello Wil, you made it. ([$lang])"
  fi

  # CrÃ©e le _index.md si absent
  index_file="$folder/_index.md"
  if [ ! -f "$index_file" ]; then
    mkdir -p "$folder"
    echo -e "---\ntitle: \"Articles\"\nlayout: list\n---" > "$index_file"
    echo "âœ… _index.md crÃ©Ã© : $index_file"
  fi

  # CrÃ©e l'article s'il n'existe pas
  if [ ! -f "$filepath" ]; then
    mkdir -p "$folder"
    cat > "$filepath" <<EOF
---
title: "Mon Test (${lang})"
date: $(date -Iseconds)
draft: false
---

$message
EOF
    echo "âœ… Article gÃ©nÃ©rÃ© : $filepath"
  else
    echo "âš ï¸ Article dÃ©jÃ  prÃ©sent : $filepath"
  fi
done

echo
echo "ğŸ Tous les fichiers sont prÃªts Ã  s'afficher dans /<lang>/posts/"


===== ./set-language-multi.sh =====
#!/bin/bash

# ğŸ“ Positionne les chemins du projet
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
config_file="$PROJECT_DIR/hugo.toml"
tmp_file="$PROJECT_DIR/hugo_tmp.toml"

# ğŸ“ VÃ©rifie que le fichier de configuration existe
if [ ! -f "$config_file" ]; then
  echo "âŒ Fichier introuvable : $config_file"
  exit 1
fi

# ğŸ§¹ Nettoie l'ancien config.toml (en retirant les anciens blocs multilingues)
grep -v 'defaultContentLanguage' "$config_file" \
  | grep -v '^\[languages' \
  | grep -v '^  \[languages\.' \
  > "$tmp_file"

# âœï¸ Ajoute la nouvelle configuration multilingue
cat >> "$tmp_file" <<'EOL'

defaultContentLanguage = "fr"

[languages]

  [languages.fr]
    languageName = "FranÃ§ais"
    contentDir = "content/fr"
    weight = 1
    [languages.fr.params]
      displayName = "FranÃ§ais"
    [languages.fr.menus]
      [[languages.fr.menus.main]]
        name = "Accueil"
        pageRef = "/"
        weight = 1
      [[languages.fr.menus.main]]
        name = "Articles"
        pageRef = "/posts/"
        weight = 2

  [languages.es]
    languageName = "EspaÃ±ol"
    contentDir = "content/es"
    weight = 2
    [languages.es.params]
      displayName = "EspaÃ±ol"
    [languages.es.menus]
      [[languages.es.menus.main]]
        name = "Inicio"
        pageRef = "/"
        weight = 1
      [[languages.es.menus.main]]
        name = "ArtÃ­culos"
        pageRef = "/posts/"
        weight = 2

  [languages.he]
    languageName = "×¢×‘×¨×™×ª"
    contentDir = "content/he"
    weight = 3
    [languages.he.params]
      displayName = "×¢×‘×¨×™×ª"
      rtl = true
    [languages.he.menus]
      [[languages.he.menus.main]]
        name = "×“×£ ×”×‘×™×ª"
        pageRef = "/"
        weight = 1
      [[languages.he.menus.main]]
        name = "××××¨×™×"
        pageRef = "/posts/"
        weight = 2

  [languages.ar]
    languageName = "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"
    contentDir = "content/ar"
    weight = 4
    [languages.ar.params]
      displayName = "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"
      rtl = true
    [languages.ar.menus]
      [[languages.ar.menus.main]]
        name = "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"
        pageRef = "/"
        weight = 1
      [[languages.ar.menus.main]]
        name = "Ù…Ù‚Ø§Ù„Ø§Øª"
        pageRef = "/posts/"
        weight = 2

  [languages.fa]
    languageName = "ÙØ§Ø±Ø³ÛŒ"
    contentDir = "content/fa"
    weight = 5
    [languages.fa.params]
      displayName = "ÙØ§Ø±Ø³ÛŒ"
      rtl = true
    [languages.fa.menus]
      [[languages.fa.menus.main]]
        name = "Ø®Ø§Ù†Ù‡"
        pageRef = "/"
        weight = 1
      [[languages.fa.menus.main]]
        name = "Ù…Ù‚Ø§Ù„Ø§Øª"
        pageRef = "/posts/"
        weight = 2
EOL

# ğŸ’¾ Remplace le fichier hugo.toml par le nouveau
mv "$tmp_file" "$config_file"

echo "âœ… Fichier hugo.toml mis Ã  jour avec menus, displayName et paramÃ¨tres multilingues complets."


===== ./set-language.sh =====
#!/bin/bash

# ğŸ“‚ Localise le fichier hugo.toml
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
CONFIG_FILE="$PROJECT_DIR/hugo.toml"

if [[ ! -f "$CONFIG_FILE" ]]; then
  echo "âŒ Fichier hugo.toml introuvable dans $PROJECT_DIR"
  exit 1
fi

# ğŸ”¤ Demande les langues
read -p "Code langue principale (ex: fr) : " lang1
read -p "Nom affichÃ© (ex: FranÃ§ais) pour $lang1 : " name1
read -p "Poids (ordre d'affichage, ex: 1) pour $lang1 : " weight1

read -p "Code langue secondaire (ex: en) : " lang2
read -p "Nom affichÃ© (ex: English) pour $lang2 : " name2
read -p "Poids (ordre d'affichage, ex: 2) pour $lang2 : " weight2

# âœ… Fonction pour ajouter une langue si elle n'existe pas
add_lang_block() {
  local lang="$1"
  local name="$2"
  local weight="$3"

  if grep -q "^\[languages\.$lang\]" "$CONFIG_FILE"; then
    echo "âš ï¸ La langue '$lang' existe dÃ©jÃ , rien Ã  faire."
  else
    echo -e "\n[languages.$lang]" >> "$CONFIG_FILE"
    echo "languageName = \"$name\"" >> "$CONFIG_FILE"
    echo "contentDir = \"content/$lang\"" >> "$CONFIG_FILE"
    echo "weight = $weight" >> "$CONFIG_FILE"
    echo "âœ… Langue '$lang' ajoutÃ©e."
  fi
}

# ğŸ› ï¸ Ajoute defaultContentLanguage si absent
if ! grep -q "^defaultContentLanguage" "$CONFIG_FILE"; then
  echo -e "\ndefaultContentLanguage = \"$lang1\"" >> "$CONFIG_FILE"
  echo "âœ… defaultContentLanguage = \"$lang1\" ajoutÃ©."
fi

# ğŸ” Ajout des langues
add_lang_block "$lang1" "$name1" "$weight1"
add_lang_block "$lang2" "$name2" "$weight2"

echo "ğŸ‰ TerminÃ©."


===== ./setup-multilang.sh =====
#!/bin/bash

# ğŸ“ RÃ©pertoire du script
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
cd "$PROJECT_DIR"

# 1. DÃ©finir les langues dans hugo.toml
echo "ğŸ”§ Ã‰tape 1 : Configuration multilingue"
"$SCRIPT_DIR/set-language-multi.sh" || { echo "âŒ Erreur set-language-multi.sh"; exit 1; }

# 2. GÃ©nÃ©rer les fichiers bienvenue.md
echo "ğŸ“ Ã‰tape 2 : GÃ©nÃ©ration des messages de bienvenue"
"$SCRIPT_DIR/generate-lang-content.sh" || { echo "âŒ Erreur generate-lang-content.sh"; exit 1; }

# 3. GÃ©nÃ©rer les articles de test
echo "ğŸ“° Ã‰tape 3 : GÃ©nÃ©ration des articles de test"
"$SCRIPT_DIR/generate-test-articles.sh" || { echo "âŒ Erreur generate-test-articles.sh"; exit 1; }

echo ""
echo "âœ… Setup terminÃ©. Lance 'hugo server -D' pour tester ton site."


